# Chrome文本助手插件

一款功能强大的Chrome浏览器插件，提供文本解释、翻译、朗读和润色功能。

## 功能特性

1. **📝 解释功能** - 使用AI解释选中的段落或关键词
2. **🌐 翻译功能** - 支持中英文互译，可选择目标语言
3. **🔊 朗读功能** - 使用Chrome内置TTS引擎朗读选中文本（支持中英文）
4. **✨ 润色功能** - AI润色文本，支持编辑和一键替换

## 安装步骤

### 1. 获取Kimi API Key

1. 访问 [Kimi开放平台](https://platform.moonshot.cn/console)
2. 登录您的账号
3. 进入"API Key 管理"页面
4. 创建新的API Key
5. 复制API Key（注意：Key只显示一次，请妥善保管）

### 2. 配置插件（推荐：点击扩展图标）

1. 安装并加载插件后，**点击浏览器工具栏中的扩展图标**
2. 在弹出窗口中填写 **API 地址**、**API Key**（必填）及可选项（模型、超时、进度条提示语等）
3. 点击「保存」；配置会保存在本地，覆盖默认值，**不会写死在代码里**

若从源码开发，也可在 `config.js` 中填写默认值；弹窗中的配置优先于 `config.js`。

### 3. 在Chrome中加载插件

1. 打开Chrome浏览器
2. 在地址栏输入 `chrome://extensions/` 并回车
3. 打开右上角的"开发者模式"开关
4. 点击左上角的"加载已解压的扩展程序"按钮
5. 选择本插件的文件夹（`chrome-plugin`）
6. 插件加载成功后，您会看到插件图标出现在扩展程序列表中

### 4. 使用插件

1. 在任意网页中选中一段文本（段落或关键词）
2. 选中后会自动弹出功能工具栏
3. 点击相应按钮使用功能：
   - **解释**：点击"解释"按钮，AI会解释选中文本的含义
   - **翻译**：点击"翻译▼"按钮，选择目标语言（中文/英文），然后显示翻译结果
   - **朗读**：点击"朗读"按钮，浏览器会朗读选中文本（再次点击可停止）
   - **润色**：点击"润色"按钮，AI会润色文本，您可以编辑结果并点击"一键替换"替换原文本

## 文件结构

```
chrome-plugin/
├── manifest.json          # 插件配置
├── popup.html / popup.js  # 点击扩展图标弹出的配置页
├── config.js             # 默认配置（无敏感信息，用户配置在弹窗中保存）
├── background.js          # 后台服务（从 storage 读取配置后调用 API）
├── content.js             # 内容脚本（选中文字后的悬浮功能）
├── styles.css             # 样式
├── icons/                 # 图标
└── README.md
```

## 配置说明

### 弹窗配置项（点击扩展图标）
- **API 地址**：默认 Kimi 官方地址，可改为自建或代理
- **API Key**：必填，在 [Kimi 开放平台](https://platform.moonshot.cn/console) 创建
- **模型**：moonshot-v1-8k / 32k / 128k 等
- **最大输出 Token、温度、请求超时、进度条提示语**：可选

### config.js 默认值（开发用）

- `apiUrl`: Kimi API的基础URL（默认已配置）
- `apiKey`: 您的Kimi API Key（**必须配置**）
- `model`: 使用的模型名称
  - `moonshot-v1-8k` - 8K上下文（默认）
  - `moonshot-v1-32k` - 32K上下文
  - `moonshot-v1-128k` - 128K上下文
  - `kimi-k2-turbo-preview` - K2预览版
- `maxTokens`: 最大输出token数（默认2000）
- `temperature`: 采样温度，0-2之间（默认0.6）

## 使用技巧

1. **多结果展示**：可以同时使用多个功能，结果会叠加显示
2. **位置自适应**：弹窗会自动调整位置，避免超出视窗范围
3. **点击外部关闭**：点击弹窗外部区域可关闭弹窗
4. **重新选择**：重新选中文本时，弹窗会重新显示

## 常见问题

### Q: 为什么在网页的 Network 里看不到接口请求？
A: 解释、翻译、润色是由**扩展的后台脚本（Service Worker）**发起请求的，不会出现在当前网页的 Network 面板里。若要查看请求：
1. 打开 `chrome://extensions/`
2. 找到本插件，点击「Service worker」或「背景页」链接
3. 在打开的开发者工具里切到 **Network** 面板，再使用解释/翻译/润色，即可看到对 Kimi API 的请求

### Q: 点击解释/翻译/润色没反应？
A: 请留意：
- 点击后会出现**蓝色进度条**和「正在请求 Kimi API...」，说明请求已发出
- 若长时间无结果，可能是网络慢或 API 限流，约 60 秒后会提示「请求超时」
- 检查是否已点击扩展图标在弹窗中配置 API Key 并保存

### Q: 插件无法加载？
A: 请确保：
- 已打开Chrome的"开发者模式"
- 选择了正确的插件文件夹
- 所有必需文件都在文件夹中

### Q: API调用失败？
A: 请检查：
- 是否已在扩展图标弹窗中配置并保存 API Key
- 网络连接是否正常
- API Key 是否有效（可在 Kimi 平台验证）

### Q: 朗读功能不工作？
A: 请检查：
- 浏览器是否支持TTS功能
- 系统音量是否开启
- 是否允许网站使用音频功能

### Q: 一键替换功能不工作？
A: 某些网页可能限制文本编辑，这是正常的安全限制。可以尝试：
- 在可编辑的网页中使用（如文档编辑器）
- 手动复制润色后的文本

## 更新日志

### v1.0.0 (2026-01-30)
- 初始版本发布
- 实现解释、翻译、朗读、润色四大功能
- 支持中英文翻译和朗读
- 支持文本替换功能

## 技术支持

如有问题或建议，请检查：
1. Chrome控制台是否有错误信息（F12打开开发者工具）
2. 插件配置是否正确
3. API Key是否有效

## 许可证

本插件仅供学习和个人使用。
